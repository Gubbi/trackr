import random


__author__ = 'vinuth'
import re

groups = [
    '9[0-9][0-9][0-9]',
    '80[0-1,5,8,9][0-9]',
    '806[5-7]',
    '810[0-9]',
    '811[3,5-9]',
    '812[0-9]',
    '813[0-9]',
    '814[0-9]',
    '815[0-9]',
    '817[0-9]',
    '818[0-9]',
    '819[0-9]',
    '822[0-9]',
    '823[0-9]',
    '825[1-9]',
    '826[0-9]',
    '827[0-9]',
    '828[0-9]',
    '829[0-8]',
    '830[0-8]',
    '8317',
    '833[0-9]',
    '834[1-9]',
    '835[0-9]',
    '837[0-9]',
    '838[0-9]',
    '839[0-9]',
    '840[0-9]',
    '841[0-9]',
    '842[0-9]',
    '843[0-9]',
    '844[0-9]',
    '845[0-9]',
    '846[0-9]',
    '847[0,6]',
    '848[0-9]',
    '849[0-9]',
    '850[0-9]',
    '851[0-8]',
    '852[0-9]',
    '853[0-9]',
    '854[0-9]',
    '855[0-4,6-9]',
    '856[0-9]',
    '857[0-9]',
    '858[0-9]',
    '859[0-9]',
    '860[0-9]',
    '862[0-9]',
    '864[0-9]',
    '865[0-9]',
    '867[0-9]',
    '868[0-9]',
    '869[0-9]',
    '871[0-9]',
    '872[0-9]',
    '874[0-9]',
    '875[0-9]',
    '876[0-9]',
    '879[0-9]',
    '880[0-9]',
    '881[0-9]',
    '882[0-9]',
    '8844',
    '885[2-9]',
    '886[0-9]',
    '887[0-9]',
    '888[0-9]',
    '889[0-9]',
    '890[0-9]',
    '892[2-9]',
    '893[0-9]',
    '894[0,8]',
    '895[0-9]',
    '896[0-9]',
    '89[7,8][0-9]',
    '7030',
    '7042',
    '720[0,4-9]',
    '725[0,9]',
    '727[5-8]',
    '729[3,8,9]',
    '730[3,4,6-9]',
    '735[0,2,3,5]',
    '737[3,6,7,9]',
    '738[2,4-9]',
    '739[6,8,9]',
    '740[1-3,5,6,8]',
    '741[1,5-9]',
    '742[8,9]',
    '7439',
    '7446',
    '748[3,8,9]',
    '749[8,9]',
    '750[0-6,8]',
    '7520',
    '753[0-3]',
    '754[3,9]',
    '756[6-9]',
    '7579',
    '758[7-9]',
    '759[7-9]',
    '760[0,2,7]',
    '7612',
    '7620',
    '763[1,9]',
    '7654',
    '766[5-8]',
    '767[6,7,9]',
    '769[6-9]',
    '770[2,8,9]',
    '773[5-9]',
    '774[1,2,5]',
    '775[5,6]',
    '776[0,2,8]',
    '777[4,8]',
    '778[4,6]',
    '779[0,4,5,7-9]',
    '780[0,7-9]',
    '781[3,4,7]',
    '782[7-9]',
    '783[0,4-9]',
    '784[2-9]',
    '785[0-9]',
    '786[0,9]',
    '787[0-9]',
    '789[0,1,3-9]',
    '7930'
]


mobile_phone_re = re.compile('^(?:\+?91)?'+'(?:' + '|'.join(groups) + ')[0-9]{6}$')

parts_re = re.compile('\\[.*?\\]')


def random_mobile_number():
    selected = random.choice(groups)
    fixed_part = re.sub(parts_re, '', selected)

    var_digits = [val.strip('[]').split(',') for val in re.findall(parts_re, selected)]
    suffix = ''
    for var_digit in var_digits:
        digit = random.choice(var_digit)
        if '-' in digit:
            start, end = digit.split('-')
            digit = random.randint(int(start), int(end))
        else:
            digit = int(digit)

        suffix += str(digit)

    return fixed_part + suffix + str(random.randint(100000, 999999))
